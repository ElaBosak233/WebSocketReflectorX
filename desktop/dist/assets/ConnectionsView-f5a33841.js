import{P as R}from"./overlayscrollbars-vue.es-6e6b7146.js";import{d as x,o as d,c as u,a as s,m as S,u as L,r as v,j as E,f as g,n as z,e as _,p as N,b as m,k as b,t as i,q as y,F as C,s as k}from"./index-9b51349e.js";const A={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},T=s("g",{fill:"none"},[s("path",{d:"M8 2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8zM7 4a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V4zM4 6a2 2 0 0 1 1-1.732V14.5A2.5 2.5 0 0 0 7.5 17h6.232A2 2 0 0 1 12 18H7.5A3.5 3.5 0 0 1 4 14.5V6z",fill:"currentColor"})],-1),H=[T],V=x({name:"Copy20Regular",render:function(t,a){return d(),u("svg",A,H)}}),B={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},U=s("g",{fill:"none"},[s("path",{d:"M4.089 4.216l.057-.07a.5.5 0 0 1 .638-.057l.07.057L10 9.293l5.146-5.147a.5.5 0 0 1 .638-.057l.07.057a.5.5 0 0 1 .057.638l-.057.07L10.707 10l5.147 5.146a.5.5 0 0 1 .057.638l-.057.07a.5.5 0 0 1-.638.057l-.07-.057L10 10.707l-5.146 5.147a.5.5 0 0 1-.638.057l-.07-.057a.5.5 0 0 1-.057-.638l.057-.07L9.293 10L4.146 4.854a.5.5 0 0 1-.057-.638l.057-.07l-.057.07z",fill:"currentColor"})],-1),I=[U],D=x({name:"Dismiss20Regular",render:function(t,a){return d(),u("svg",B,I)}}),P={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},F=s("g",{fill:"none"},[s("path",{d:"M6.19 2.77c.131-.456.548-.77 1.022-.77h5.25c.725 0 1.237.71 1.007 1.398l-.002.008L12.205 7h2.564c.947 0 1.407 1.144.767 1.811l-.004.004l-8.676 8.858c-.755.782-2.06.06-1.796-.996l1.17-4.679H4.963a1.062 1.062 0 0 1-1.022-1.354l2.25-7.873zM7.213 3a.062.062 0 0 0-.06.045l-2.25 7.874c-.01.04.02.08.06.08H6.87a.5.5 0 0 1 .485.62l-1.325 5.3a.086.086 0 0 0-.003.03c0 .004.002.008.003.011c.004.008.013.02.03.03c.018.01.034.01.042.01a.03.03 0 0 0 .01-.004a.087.087 0 0 0 .024-.018l.004-.004l8.675-8.856a.056.056 0 0 0 .017-.032a.084.084 0 0 0-.007-.044a.079.079 0 0 0-.025-.034c-.005-.004-.013-.008-.03-.008H11.5a.5.5 0 0 1-.472-.666l1.493-4.254a.062.062 0 0 0-.06-.08H7.212z",fill:"currentColor"})],-1),q=[F],J=x({name:"Flash20Regular",render:function(t,a){return d(),u("svg",P,q)}}),O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},j=s("g",{fill:"none"},[s("path",{d:"M17.854 2.146a.5.5 0 0 1 0 .708l-1.668 1.668a4.039 4.039 0 0 1-.332 5.331l-.3.3l-.003.003l-.309.309a1.05 1.05 0 0 1-1.484 0L9.535 6.242a1.05 1.05 0 0 1 0-1.485l.611-.61a4.036 4.036 0 0 1 5.332-.332l1.668-1.669a.5.5 0 0 1 .708 0zM15.14 4.847a3.037 3.037 0 0 0-4.286.006l-.3.3a.49.49 0 0 0 0 .693l3.6 3.6c.19.191.5.192.691.002l.002-.002l.3-.3a3.036 3.036 0 0 0 .006-4.286l-.007-.006l-.006-.007zm-5.786 3.8a.5.5 0 0 1 0 .707L7.707 11L9 12.293l1.646-1.647a.5.5 0 0 1 .708.708L9.707 13l.447.447a1.49 1.49 0 0 1 0 2.107l-.3.3a4.036 4.036 0 0 1-5.332.332l-1.668 1.668a.5.5 0 0 1-.708-.708l1.669-1.668a4.036 4.036 0 0 1 .331-5.331l.3-.3a1.49 1.49 0 0 1 2.108 0l.446.446l1.646-1.647a.5.5 0 0 1 .708 0zm-4.495 6.505a3.036 3.036 0 0 0 4.287-.005l.3-.3a.49.49 0 0 0 0-.693l-3.6-3.6a.49.49 0 0 0-.692 0l-.3.3a3.036 3.036 0 0 0 0 4.292l.005.006z",fill:"currentColor"})],-1),K=[j],X=x({name:"PlugDisconnected20Regular",render:function(t,a){return d(),u("svg",O,K)}});var G=function(){var o=document.getSelection();if(!o.rangeCount)return function(){};for(var t=document.activeElement,a=[],c=0;c<o.rangeCount;c++)a.push(o.getRangeAt(c));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return o.removeAllRanges(),function(){o.type==="Caret"&&o.removeAllRanges(),o.rangeCount||a.forEach(function(h){o.addRange(h)}),t&&t.focus()}},Q=G,M={"text/plain":"Text","text/html":"Url",default:"Text"},W="Copy to clipboard: #{key}, Enter";function Y(o){var t=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return o.replace(/#{\s*key\s*}/g,t)}function Z(o,t){var a,c,h,f,p,l,w=!1;t||(t={}),a=t.debug||!1;try{h=Q(),f=document.createRange(),p=document.getSelection(),l=document.createElement("span"),l.textContent=o,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),typeof r.clipboardData>"u"){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var n=M[t.format]||M.default;window.clipboardData.setData(n,o)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,o);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))}),document.body.appendChild(l),f.selectNodeContents(l),p.addRange(f);var e=document.execCommand("copy");if(!e)throw new Error("copy command was unsuccessful");w=!0}catch(r){a&&console.error("unable to copy using execCommand: ",r),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",o),t.onCopy&&t.onCopy(window.clipboardData),w=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),c=Y("message"in t?t.message:W),window.prompt(c,o)}}finally{p&&(typeof p.removeRange=="function"?p.removeRange(f):p.removeAllRanges()),l&&document.body.removeChild(l),h()}return w}var ee=Z;const te={class:"flex-1 relative"},se={class:"absolute w-full h-full top-0 left-0"},ae={class:"p-8 flex flex-col space-y-3"},oe={class:"text-base flex flex-row items-center"},le={key:0,class:"text-base self-center opacity-60"},ne={class:"flex flex-col flex-1"},re={class:"flex flex-row flex-wrap items-center space-x-4"},ce={class:"opacity-80"},ie={class:"rounded-full bg-base-content/5 pl-3 pr-3 text-sm text-success"},de=s("span",{class:"flex-1"},null,-1),ue={class:"text-sm opacity-60"},he=["onClick"],pe=["onClick"],fe={class:"text-base flex flex-row items-center !mt-8"},ge={key:1,class:"text-base self-center opacity-60"},me={class:"flex flex-col flex-1"},_e={class:"flex flex-row items-center space-x-4"},we={class:"rounded-full bg-base-content/5 pl-3 pr-3 text-sm text-warning"},xe={class:"text-sm opacity-60"},ve={class:"btn btn-sm btn-square btn-ghost hidden group-hover:inline-flex"},Ce=x({__name:"ConnectionsView",setup(o){const t=S(),a=L(),c=v([]),h=v([]);let f=0;const p=()=>{g("refresh_latency").then(()=>{g("get_alive_connections").then(e=>{c.value=JSON.parse(e)}).catch(e=>{a.showMessage("error",e,5e3)}),g("get_dead_connections").then(e=>{h.value=JSON.parse(e)}).catch(e=>{a.showMessage("error",e,5e3)})}).catch(e=>{a.showMessage("error",e,5e3)})},l=e=>{g("close_connection",{id:e}).then(()=>{p()}).catch(r=>{a.showMessage("error",r,5e3)})},w=e=>{try{ee(e),a.showMessage("success","Local link copied!",5e3)}catch{a.showMessage("error","Copy failed",5e3)}};return E(()=>{g("get_alive_connections").then(e=>{c.value=JSON.parse(e)}).catch(e=>{a.showMessage("error",e,5e3)}),g("get_dead_connections").then(e=>{h.value=JSON.parse(e)}).catch(e=>{a.showMessage("error",e,5e3)}),g("refresh_latency"),f=setInterval(()=>{p()},1e4)}),z(()=>{clearInterval(f)}),(e,r)=>(d(),u("div",te,[s("div",se,[_(m(R),{options:{scrollbars:{theme:m(t).scrollbarStyle,autoHide:"scroll"}},class:"w-full h-full print:h-auto print:overflow-auto",defer:""},{default:N(()=>[s("div",ae,[s("h1",oe,[_(m(J),{class:"w-5 h-5 mr-2 text-success"}),b(" "+i(e.$t("activeConnections")),1)]),c.value.length===0?(d(),u("div",le,i(e.$t("empty")),1)):y("",!0),(d(!0),u(C,null,k(c.value,n=>(d(),u("div",{key:n.id,class:"flex flex-row rounded-sm hover:bg-base-content/5 backdrop-blur p-2 border-opacity-10 border-b border-base-content group"},[s("div",ne,[s("h2",re,[s("span",null,i(n.id),1),s("span",ce,"-> localhost:"+i(n.port),1),s("span",ie,i(n.latency)+" ms ",1),de]),s("p",ue,i(n.url),1)]),s("button",{class:"btn btn-sm btn-square btn-ghost hidden group-hover:inline-flex",onClick:$=>w(`localhost:${n.port}`)},[_(m(V),{class:"w-5 h-5 text-success"})],8,he),s("button",{class:"btn btn-sm btn-square btn-ghost hidden group-hover:inline-flex",onClick:$=>l(n.id)},[_(m(D),{class:"w-5 h-5"})],8,pe)]))),128)),s("h1",fe,[_(m(X),{class:"w-5 h-5 mr-2 text-warning"}),b(" "+i(e.$t("inactiveConnections")),1)]),h.value.length===0?(d(),u("div",ge,i(e.$t("empty")),1)):y("",!0),(d(!0),u(C,null,k(h.value,n=>(d(),u("div",{key:n.id,class:"flex flex-row rounded-sm hover:bg-base-content/5 backdrop-blur p-2 border-opacity-10 border-b border-base-content group"},[s("div",me,[s("h2",_e,[s("span",null,i(n.id),1),s("span",we,i(n.latency)+" ms ",1)]),s("p",xe,i(n.url),1)]),s("button",ve,[_(m(D),{class:"w-5 h-5"})])]))),128))])]),_:1},8,["options"])])]))}});export{Ce as default};
